<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>å®‡å®™ä¹‹æ˜Ÿ è£è€€ç¤¼ç›’</title>
    <style>
        :root {
            --gold: #FFD700;
            --orange: #FFA500;
        }

        body {
            position: relative;
            color: white;
            font-family: 'å¾®è½¯é›…é»‘', sans-serif;
            margin: 0;
            min-height: 100vh;
            overflow-x: hidden;
            background: #0a0a0a url('https://raw.githubusercontent.com/Kybzl/Pictures/refs/heads/main/images/msn.jpeg') no-repeat center/cover fixed;
        }

        .background-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.85);
            z-index: -1;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px;
            position: relative;
        }

        /* å…¶ä»–åŸæœ‰æ ·å¼ä¿æŒä¸å˜... */

      .status-bar {
         display: grid;
         grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
         gap: 15px;
    /* å…¶ä»–æ ·å¼ä¿æŒä¸å˜ */
}

        .card {
            background: linear-gradient(45deg, rgba(255,215,0,0.1), rgba(0,0,0,0.3));
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border: 1px solid var(--gold);
            box-shadow: 0 0 30px rgba(255,215,0,0.2);
            position: relative;
        }

        .draw-button {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(45deg, var(--gold), var(--orange));
            border: none;
            padding: 15px 30px;
            border-radius: 30px;
            color: #1a1a1a;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(255,215,0,0.4);
        }

        /* æ–°å¢æŠ˜å æ ·å¼ */
        .collapse-button {
            background: rgba(255,255,255,0.1);
            border: 1px solid var(--gold);
            padding: 8px 16px;
            border-radius: 20px;
            color: white;
            cursor: pointer;
            margin: 10px 0;
            transition: all 0.3s;
        }

        .collapse-button:hover {
            background: rgba(255,255,255,0.2);
        }

        .collapsed {
            display: none;
        }

        .rewards-container {
            max-height: 400px;
            overflow-y: auto;
        }

        .shop-item {
            display: inline-block;
            background: rgba(255,255,255,0.1);
            padding: 15px;
            margin: 10px;
            border-radius: 10px;
            width: 220px;
            vertical-align: top;
            transition: transform 0.3s;
        }

        .shop-item:hover {
            transform: translateY(-5px);
        }
        
        .reward-item {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            margin: 10px;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .button-group {
            position: absolute;
            bottom: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
        }

        .reset-button {
            background: linear-gradient(45deg, #ff4444, #cc0000);
            border: none;
            padding: 15px 30px;
            border-radius: 30px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        :root {
            --gold: #FFD700;
            --orange: #FFA500;
        }

        body {
            position: relative;
            color: white;
            font-family: 'å¾®è½¯é›…é»‘', sans-serif;
            margin: 0;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* èƒŒæ™¯ä¼˜åŒ– */
        .background-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: #0a0a0a;
            transition: opacity 0.5s;
        }

        .background-wrapper::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(0,0,0,0.85), rgba(0,0,0,0.95));
        }

        .background-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0;
            transition: opacity 0.8s ease-in-out;
        }

        .background-image.loaded {
            opacity: 1;
        }

        /* ç§»åŠ¨ç«¯é€‚é… */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .status-bar {
                grid-template-columns: 1fr;
            }
            
            .draw-button {
                padding: 12px 24px;
                font-size: 14px;
                bottom: 10px;
                right: 10px;
            }
}
    </style>
</head>
<body>
    <div class="background-overlay"></div>
    <div class="container">
        <!-- åŸæœ‰HTMLç»“æ„ä¿æŒä¸å˜... -->
        <div class="header">
            <h1>ğŸŒŒ å®‡å®™ä¹‹æ˜Ÿ è£è€€ç¤¼ç›’ ğŸ</h1>
            <div class="status-bar">
               <div>ğŸ° æŠ½å–æ¬¡æ•°ï¼š<span id="drawCount">0</span></div>
               <div>â­ è£è€€å€¼ï¼š<span id="honorValue">0</span>/300</div>
               <div>ğŸ å·²è·å¥–åŠ±ï¼š<span id="rewardsCounter">0</span> ä¸ª</div>
</div>
        </div>
        
         <div class="card">
            <div id="result"></div>
            <button class="draw-button" onclick="draw()" id="drawButton">
                âœ¨ æ¶ˆè€—1000é‡‘å¸æŠ½å¡ âœ¨
            </button>
        </div>       
<!-- å…¶ä»–åŸæœ‰HTMLå†…å®¹ä¿æŒä¸å˜... -->

        <div class="card">
            <h2>ğŸ›’ å…‘æ¢å•†åº—</h2>
           <div class="shop-item">
    <h3>åŒå¢èƒ½æ¢…è¥¿</h3>
    <button onclick="exchange('åŒå¢èƒ½æ¢…è¥¿', 36)">36 â­ å…‘æ¢</button>
            </div>
            <div class="shop-item">
    <h3>åŒå¢èƒ½å†…é©¬å°”</h3>
    <button onclick="exchange('åŒå¢èƒ½å†…é©¬å°”', 36)">36 â­ å…‘æ¢</button>
</div>

<div class="shop-item">
    <h3>åŒå¢èƒ½è‹äºšé›·æ–¯</h3>
    <button onclick="exchange('åŒå¢èƒ½è‹äºšé›·æ–¯', 36)">36 â­ å…‘æ¢</button>
</div>

<div class="shop-item">
    <h3>æ¢…è¥¿å†…é©¬å°”ç»„åˆåŒ…</h3>
    <button onclick="exchange('æ¢…è¥¿å†…é©¬å°”ç»„åˆåŒ…', 63)">63 â­ å…‘æ¢</button>
</div>

    <div class="container">
    </div>

        <div class="card">
            <h2>ğŸ ç´¯è®¡å¥–åŠ±</h2>
            <div class="rewards-container" id="rewardsContainer"></div>
            <div class="collapse-button" id="collapseButton" onclick="toggleCollapse()">å±•å¼€æ›´å¤šå¥–åŠ±</div>
        </div>
    </div>

    <script>
        // åˆå§‹åŒ–æ¸¸æˆçŠ¶æ€
        let state = {
            drawCount: 0,
            honor: 0,
            claimedRewards: [],
            gold: 1000000
        };

        // æ–°å¢é‡ç½®åŠŸèƒ½
        function resetGame() {
            if(confirm('ç¡®å®šè¦é‡ç½®æ¸¸æˆè¿›åº¦å—ï¼Ÿæ‰€æœ‰æ•°æ®éƒ½å°†ä¸¢å¤±ï¼')) {
                // é‡ç½®æ¸¸æˆçŠ¶æ€
                state = {
                    drawCount: 0,
                    honor: 0,
                    claimedRewards: [],
                    gold: 1000000
                };
                
                // é‡ç½®å¥–åŠ±ç³»ç»ŸçŠ¶æ€
                rewardSystem.rewards.forEach(reward => {
                    reward.claimed = false;
                });

                // é‡ç½®UIæ˜¾ç¤º
                document.getElementById('result').innerHTML = '';
                updateUI();
                
                // å¼ºåˆ¶åˆ·æ–°æ‰€æœ‰æ˜¾ç¤ºå‚æ•°
                showResult('æ¸¸æˆå·²é‡ç½®ï¼', '#00FF88');
                alert('æ¸¸æˆå·²é‡ç½®ï¼');
            }
        }

        // æ›´æ–°ç•Œé¢
        function updateUI(message, color) {
            document.getElementById('drawCount').textContent = state.drawCount;
            document.getElementById('honorValue').textContent = state.honor;
            document.getElementById('rewardsCounter').textContent = state.claimedRewards.length;
            
            // æ›´æ–°æ¦‚ç‡å’Œå€ç‡æ˜¾ç¤º
            const probDisplay = document.getElementById('currentProb');
            const rateDisplay = document.getElementById('currentRate');
            if(probDisplay && rateDisplay) {
                probDisplay.textContent = probabilityConfig.getCurrentProb(state.drawCount);
                rateDisplay.textContent = rateCalculator.getRate(state.drawCount);
            }

            if (message) showResult(message, color);
            updateRewardsDisplay();
            document.getElementById('drawButton').disabled = state.gold < 1000;
        }

      // æ¦‚ç‡é…ç½®
        const probabilityConfig = {
            phases: [
                { start: 0,  prob: 3   },
                { start: 5,  prob: 3.75},
                { start: 10, prob: 4.5 },  
                { start: 15, prob: 5.25},
                { start: 20, prob: 5.88},
                { start: 25, prob: 6   }
            ],
            getCurrentProb(count) {
                const phase = this.phases.slice().reverse().find(p => count >= p.start);
                return phase ? phase.prob : 0;
            }
        };

        // å€ç‡è®¡ç®—å™¨
        const rateCalculator = {
            getRate(count) {
                if (count <= 5) return 100 + (count - 1) * 100;
                return Math.min(475 + (count - 5) * 25, 1000);
            }
        };       
 // ç´¯è®¡å¥–åŠ±é…ç½®
        const rewardSystem = {
            rewards: [
                { count:5, name:'è£è€€é«˜å…‰ç¤¼ç›’ç¬¬ä¸€å¼¹', players:[
                                            'å²è¯—è´¹é›·å°”', 'å²è¯—å“ˆç»´', 'å²è¯—ä¼Šæ¶…æ–¯å¡”', 'å²è¯—åŸƒå¾·ç±³å°”æ£®',
                        'å•å¢èƒ½å¤§å«æ¯”åˆ©äºš', 'å•å¢èƒ½é‡Œç“¦å°”å¤š', 'å•å¢èƒ½å…‹é²ä¼Šå¤«', 'åŒå¢èƒ½é˜¿å°”å·´'
                    ],
                    claimed: false
                },
                {
                    count: 10,
                    name: 'è£è€€é«˜å…‰ç¤¼ç›’ç¬¬äºŒå¼¹',
                    players: [
                        'å²è¯—è¨ç»´å¥¥æ‹‰', 'å•å¢èƒ½å·´è¥¿å¡æ´›æ–¯', 'å•å¢èƒ½å·´è¥¿ç½—é©¬é‡Œå¥¥', 
                        'å•å¢èƒ½å·´è¥¿å¾·å°¼å°”æ£®', 'å•å¢èƒ½å·´è¥¿å¡ç¦', 'å•å¢èƒ½ä¹Œæ‹‰åœ­å¼—å…°',
                        'å•å¢èƒ½è´éš†', 'åŒå¢èƒ½è´è±è’‚'
                    ],
                    claimed: false
                },
                {
                    count: 15,
                    name: 'è£è€€é«˜å…‰ç¤¼ç›’ç¬¬ä¸‰å¼¹',
                    players: [
                        'å²è¯—ç»´åŸƒæ‹‰', 'å²è¯—é˜¿éš†ç´¢', 'å•å¢èƒ½å¡å°”å‰å¥¥', 
                        'å•å¢èƒ½åŠ è¥¿äºš', 'å•å¢èƒ½åŠ³å°”', 'å•å¢èƒ½å› æ‰å‰',
                        'å•å¢èƒ½åšæ ¼åæ™®', 'åŒå¢èƒ½ç“œè¿ªå¥¥æ‹‰'
                    ],
                    claimed: false
                },
                {
                    count: 20,
                    name: 'ä¼ å¥‡äº”æ˜Ÿç»çºªäºº',
                    players: [
                        'å…‹é²ä¼Šå¤«', 'ä¼Šæ¶…æ–¯å¡”', 'å¡è¥¿åˆ©äºšæ–¯', 'å°ç½—', 'å†…æ–¯å¡”',
                        'é²æ¢…å°¼æ ¼', 'èŒƒå·´æ–¯æ»•', 'ç»´åŸƒæ‹‰', 'ç½—é©¬é‡Œå¥¥', 'æµç§‘', 'çš®è€¶ç½—', 'é©¬å…‹è±è±', 'åšæ ¼åæ™®', 'å¾·ç½—å·´', 'å¡çº³ç“¦ç½—',
                        'æ‰˜è’‚', 'å…°å¸•å¾·', 'é‡Œæ°å¡å°”å¾·', 'å·´è’‚', 'å¡å¡', 'å¡æ©',
                        'é©¬å°”è’‚å°¼', 'å†…å¾·ç»´å¾·', 'èˆ’æ¢…åˆ‡å°”', 'é‡Œç“¦å°”å¤š', 'å¤åˆ©ç‰¹',
                        'èŒƒå°¼æ–¯ç‰¹é²', 'åŸƒæ‰˜å¥¥', 'æ°æ‹‰å¾·', 'çš®å°”æ´›', 'è¥¿å¤šå¤«',
                        'è´å…‹æ±‰å§†', 'åŠ³', 'è¿ªè¾¾', 'é‡çŒªæˆ´ç»´æ–¯', 'æ–¯æ‰˜ä¼Šå¥‡ç§‘å¤«',
                        'é©¬ç‰¹ä¹Œæ–¯', 'è²æˆˆ', 'æ–¯ç§‘å°”æ–¯', 'åŠ³å°”', 'å¡æ´›æ–¯', 'æ–¯å†…å¾·',
                        'å“ˆç»´', 'è´¹é›·å°”', 'ç½—å¸ƒæ£®', 'å¡ç¦', 'è¥¿æ›¼', 'æ¯”åˆ©äºš',
                        'åŸƒå°”æ–‡', 'è«ä¼¦ç‰¹æ–¯', 'æ‰˜é›·æ–¯', 'å¤è’‚', 'å¥¥æ ¹å¡”å‹’', 'æ¬§æ–‡',
                        'å…‹é²ä¼Šç»´ç‰¹', 'å¡å°”å‰å¥¥', 'ç“œè¿ªå¥¥æ‹‰', 'åˆ‡èµ«', 'èµ«å†…æ–¯',
                        'æ‹œäºš', 'é˜¿éš†ç´¢'
                    ],
                    claimed: false
                },
                {
                    count: 25,
                    name: 'è£è€€ä¼ å¥‡ç¤¼ç›’',
                    players: [
                        'é»„ä¼ å°ç½—', 'é»„ä¼ çš®å°”æ´›', 'é»„ä¼ åŸƒå°”æ–‡',
                        'é»„ä¼ å…‹é²ä¼Šç»´ç‰¹', 'é»„ä¼ æ¬§æ–‡', 'é»„ä¼ æ–¯å†…å¾·', 'é»„ä¼ è´è±è’‚'
                    ],
                    claimed: false
                }
            ],

            check(currentCount) {
                return this.rewards.filter(reward => 
                    currentCount >= reward.count && !reward.claimed
                );
            }
        };

        // æŠ˜å åŠŸèƒ½ç›¸å…³
        let isCollapsed = true;
        const maxVisibleRewards = 2;

                // äº”å¤§è”èµ›çƒå‘˜æ•°æ®åº“ï¼ˆå®Œæ•´250åçƒå‘˜ï¼‰
        const playersDB = {
               'æ™®å¡': [
                'å­™å…´æ…œ', 'å“ˆé‡ŒÂ·å‡¯æ©', 'å¾·å¸ƒåŠ³å†…', 'è¨æ‹‰èµ«', 'èŒƒæˆ´å…‹',
                'å¸ƒé²è¯ºÂ·è´¹å°”å—å¾·æ–¯', 'åç‰¹', 'æ–¯ç‰¹æ—', 'é˜¿è¯ºå¾·', 'é©¬å†…',
                'æ‹‰ä»€ç¦å¾·', 'æ¡‘ä¹”', 'ç¦ç™»', 'æ ¼æ‹‰åˆ©ä»€', 'è©¹å§†æ–¯',
                'è’‚äºšæˆˆ', 'è‹¥æ—¥å°¼å¥¥', 'èŠ’ç‰¹', 'å¢å¡åº“', 'é½è€¶èµ«',
                'å•è¿ªæ ¼', 'é˜¿æ–¯çš®åˆ©å¥å¡”', 'çƒ­è‹æ–¯', 'æ´¥ç´ç§‘', 'æ´›é‡Œ',
                'å‡¯å°”Â·æ²ƒå…‹', 'é©¬èµ«é›·æ–¯', 'äº¬å¤šå®‰', 'ç½—å¾·é‡Œ', 'åŸƒå¾·æ£®', 'è¿ªäºšæ–¯', 'è´å°”çº³å¤šÂ·å¸­å°”ç“¦', 'è²å°”Â·ç¦ç™»', 'å¡å¡ç±³ç½—', 'ç“¦æ‹‰å†…',            
                'æ¡‘åˆ‡æ–¯', 'å„å¾·é«˜', 'è¨å¡', 'å¥¥å·´æ¢…æ‰¬', 'æ‹‰å¡æ³½ç‰¹',
                'æ‰˜é©¬æ–¯Â·å¸•å°”ç‰¹ä¼Š', 'æœ¬Â·æ€€ç‰¹', 'è’‚å°”å°¼', 'å²å¯†æ–¯Â·ç½—', 'æ´›å­”åŠ ',
                'å¯Œå®‰å¥æ´‹', 'é©¬ä¸å†…åˆ©', 'æ©å‡¯è’‚äºš', 'æ‹‰å§†æ–¯ä»£å°”', 'éœå°”ä¸',
                'æœ¬æ³½é©¬', 'è«å¾·é‡Œå¥‡', 'ç»´å°¼ä¿®æ–¯', 'åº“å°”å›¾ç“¦', 'é˜¿æ‹‰å·´',
                'å…‹ç½—æ–¯', 'å·´å°”éŸ¦å¾·', 'ç½—å¾·é‡Œæˆˆ', 'é˜¿æ£®è¥¿å¥¥', 'å¡é©¬æ–‡åŠ ',
                'ç±³åˆ©å”', 'å•è¿ªæ ¼', 'çº³ä¹”', 'å¡ç“¦å“ˆå°”', 'å·´æ–¯å…‹æ–¯',
                'æ¢…è¥¿', 'è±ä¸‡å¤šå¤«æ–¯åŸº', 'ä½©å¾·é‡Œ', 'åŠ ç»´', 'å¾·å®¹',
                'ç‰¹å°”æ–½ç‰¹æ ¹', 'é˜¿åŠ³éœ', 'å…‹é‡Œæ–¯æ»•æ£®', 'å­”å¾·', 'ç™»è´è±',
                'è´¹å…°Â·æ‰˜é›·æ–¯', 'æ‹‰è²å°¼äºš', 'å‡¯è¥¿', 'å¸ƒæ–¯å…‹èŒ¨', 'é˜¿å°”å·´',
                'æ ¼é‡Œå…¹æ›¼', 'è«æ‹‰å¡”', 'ç§‘å…‹', 'è¨ä¹Œå°”', 'ç•¥ä¼¦ç‰¹',
                'å¥¥å¸ƒæ‹‰å…‹', 'å¸Œé—¨å°¼æ–¯', 'å‹’é©¬å°”', 'å¡æ‹‰æ–¯ç§‘', 'å¾·ä¿ç½—',
                'è´¹åˆ©å…‹æ–¯', 'æ ¼åˆ—å…¹æ›¼', 'è‹äºšé›·æ–¯', 'å¡ç“¦å°¼', 'çš®å…‹',
                'é˜¿å°”ç»´æ–¯', 'æ™®ä¼Šæ ¼', 'å°¼ç§‘', 'åŠ è¥¿äºš', 'æ³•è’‚',
                'ç©†å‹’', 'åŸºç±³å¸Œ', 'è¯ºä¼Šå°”', 'è¨å†…', 'æ ¼çº³å¸ƒé‡Œ',
                'æˆ´ç»´æ–¯', 'å¢å¡æ–¯Â·åŸƒå°”å—å¾·æ–¯', 'å¸•ç“¦å°”', 'æ ¼é›·èŒ¨å¡', 'é©¬å†…',
                'å¾·é‡Œèµ«ç‰¹', 'åå¡æ´›', 'ç§‘æ›¼', 'ç´¢é»˜', 'äºå¸•æ¢…å¡è¯º',
                'å“ˆå…°å¾·', 'è´æ—å„å§†', 'ç½—ä¼Šæ–¯', 'å¸ƒå…°ç‰¹', 'é˜¿åå‰',
                'èƒ¡æ¢…å°”æ–¯', 'ç©†ç§‘ç§‘', 'é›·çº³', 'æ–½æ´›ç‰¹è´å…‹', 'èšå‹’',
                'ç»´å°”èŒ¨', 'è¿ªäºšæ¯”', 'å¡”æ™®ç´¢å·´', 'å¼—æ—è“¬', 'èµ«æ´›çƒ­å…‹',
                'æ©æ˜†åº“', 'å¥¥å°”è«', 'ç»´å°”çº³', 'åŠ³å§†', 'å…‹æ´›æ–¯ç‰¹æ›¼',
                'è±é»˜å°”', 'è¥¿é©¬å', 'äº¨é‡Œå¸Œæ–¯', 'æ³¢å°”æ£®', 'ç¦æ–¯è´é‡Œ',
                'ç´¢åšæ–¯æ´›ä¼Š', 'æ ¼ç“¦è¿ªå¥¥å°”', 'è±æ¯”é”¡', 'æ©æ¢…æŸ¥', 'é˜¿å¾·è€¶ç±³',
                'é©¬ä¼¦', 'æ–½æ´›ç‰¹è´å…‹', 'æ²ƒå°”å¤«', 'é›·çº³', 'è´å…‹å°”',
                'è±å¥¥', 'å‰é²', 'ç‰¹å¥¥', 'æ‰˜çº³åˆ©', 'è¿ˆå°¼æ˜‚',
                'è¿ªäºšæ–¯', 'å¡æ‹‰å¸ƒé‡Œäºš', 'å…‹äºšå°”', 'æœ¬çº³èµ›å°”', 'è¨å‹’é©¬å…‹å°”æ–¯',
                'åŠ³å¡”ç½—', 'å·´é›·æ‹‰', 'ä»€å…‹é‡Œå°¼äºšå°”', 'å·´æ–¯æ‰˜å°¼', 'æ°å°”æ±—å¥¥å¢',
                'å¢å¡åº“', 'å“²ç§‘', 'é‚“é‚“å¼—é‡Œæ–¯', 'å¾·å¼—é‡Œ', 'å¸ƒç½—ä½ç»´å¥‡',
                'å¥¥æ–¯æ¢…æ©', 'å…‹ç“¦æ‹‰èŒ¨èµ«åˆ©äºš', 'é‡‘çŸå“‰', 'æ´›åšç‰¹å¡', 'å®‰å¤ä¼Šè¨',
                'è¿ªæ´›ä¼¦ä½', 'é²ä¼Š', 'æ¢…é›·ç‰¹', 'æ³¢åˆ©å¡”è¯º', 'æ³½æ—æ–¯åŸº',
                'å¼—æ‹‰éœç»´å¥‡', 'åŸºè€¶è¨', 'åšæ ¼å·´', 'è¾¾å°¼æ´›', 'å¸ƒé›·é»˜',
                'è¿ªé©¬åˆ©äºš', 'å¸•é›·å¾·æ–¯', 'ç§‘æ–¯è’‚å¥‡', 'ç±³åˆ©å…‹', 'æ´›å¡ç‰¹åˆ©',
                'å› è«æ¯”è±', 'é˜¿å°”è´æ‰˜', 'ç±³æ—ç§‘ç»´å¥‡', 'å®‰å¾·æ£®', 'æ‰å¡å°¼',
                'ç½—é©¬å°¼å¥¥åˆ©', 'æ‰˜è«é‡Œ', 'å¡å¢å¢', 'å…‹é²å°¼å¥‡', 'é›·æ¯”å¥‡',
                'å§†å·´ä½©', 'å†…é©¬å°”', 'æ¢…è¥¿', 'å¤šçº³é²é©¬', 'æ‹‰è«æ–¯',
                'é©¬å°”åŸºå°¼å¥¥æ–¯', 'ç»´æ‹‰è’‚', 'é˜¿ä»€æ‹‰å¤«', 'é—¨å¾·æ–¯', 'é‡‘å½­è´',
                'åŸƒåŸºè’‚å…‹', 'æ¡‘è°¢æ–¯', 'é²ä¼Šæ–¯', 'ç´¢è±å°”', 'ç©†åŸºå‹’',
                'å¤§å«', 'ä¹”çº³æ£®Â·æˆ´ç»´', 'ä¸°ç‰¹', 'çƒ­å°”æ¾', 'å®‰å¾·çƒˆÂ·æˆˆéº¦æ–¯',
                'å¡è´æ‹‰', 'ç­å·´', 'å¥¥çº³æ–¯', 'å°¼å¤æ‹‰æ–¯Â·ä½©ä½©', 'è¿ªäºšåŸºç‰¹',
                'ç¦æ³•çº³', 'å¤æ–¯æ‰˜', 'æ‹‰å¡æ³½ç‰¹', 'æ‰˜åˆ©ç´¢', 'å¸•å¥å¡”',
                'ç™»è´è±', 'å·´å°”ç§‘æ‹‰', 'åˆ‡å°”åŸº', 'å¥¥äºšå°”', 'å¸•ç“¦å°”',
                'æ³°é‡Œè€¶', 'è¨ç“¦å°¼è€¶', 'é©¬ç»´è¿ªè¿ª', 'åŸƒæ¢…åŠ ', 'ç“¦å¸Œ',
                'å¡é©¬æ‹‰', 'å…‹åŠ³æ–¯', 'æ¡‘é€šå…¹', 'é˜¿å¡”å°”', 'å¸ƒå·´å¡å°”Â·å¡é©¬æ‹‰',
                'äº‘ä»£å°”', 'å¸•è€¶', 'è´¡å¤šé½', 'è·¯æ˜“æ–¯Â·è‹äºšé›·æ–¯', 'å·´æ´›è´¡'
            ]
        };

 // æ ¸å¿ƒæŠ½å¡é€»è¾‘
        function draw() {
            if (state.gold < 1000) {
                alert('é‡‘å¸ä¸è¶³ï¼');
                return;
            }
            
            state.gold -= 1000;
            const currentDrawCount = ++state.drawCount;
            
            const baseProb = probabilityConfig.getCurrentProb(currentDrawCount);
            const rate = rateCalculator.getRate(currentDrawCount);
            const actualProb = (baseProb * rate) / 100;

            const isHonor = Math.random() * 100 < actualProb;
            let resultMessage = isHonor 
                ? `ğŸ‰ è£è€€é™ä¸´ï¼è·å¾—1ç‚¹è£è€€å€¼`
                : `ğŸ† è·å¾—çƒå‘˜ï¼š${getRandomPlayer()}`;

            if (isHonor) state.honor += 1;

            const newRewards = rewardSystem.check(currentDrawCount);
            newRewards.forEach(reward => {
                reward.claimed = true;
                state.claimedRewards.push({...reward});
                showRewardNotification(reward);
            });

            updateUI(resultMessage, isHonor ? '#FFD700' : '#00FF88');
        }

        // å…‘æ¢åŠŸèƒ½
        function exchange(itemName, cost) {
    if (state.honor >= cost) {
        state.honor -= cost;
        alert(`å…‘æ¢${itemName}æˆåŠŸï¼`);
        updateUI();
    } else {
        alert('è£è€€å€¼ä¸è¶³ï¼');
    }
}

        // æ–°å¢å¥–åŠ±æŠ½å–åŠŸèƒ½
        function drawRewardPlayer(rewardIndex) {
            const reward = state.claimedRewards[rewardIndex];
            if (!reward) return;
            
            const player = reward.players[Math.floor(Math.random()*reward.players.length)];
            showResult(`ğŸ‰ ä»ã€${reward.name}ã€‘è·å¾—ï¼š${player}`, '#FFD700');
        }

        // é¢„åŠ è½½èƒŒæ™¯å›¾ç‰‡
        const preloadImage = new Image();
        preloadImage.src = 'https://raw.githubusercontent.com/Kybzl/Pictures/refs/heads/main/images/msn.jpeg';
        preloadImage.onload = () => {
            document.body.style.backgroundImage = `url(${preloadImage.src})`;
        };

        // å…¶ä»–åŸæœ‰JavaScriptä»£ç ä¿æŒä¸å˜...

        // å¥–åŠ±æŠ˜å åŠŸèƒ½
        function updateRewardsDisplay() {
            const container = document.getElementById('rewardsContainer');
            container.innerHTML = '';
            const rewards = state.claimedRewards;

            rewards.slice(0, maxVisibleRewards).forEach((reward, index) => {
                container.innerHTML += createRewardItem(reward, index);
            });

            if (rewards.length > maxVisibleRewards) {
                const collapsedContainer = document.createElement('div');
                collapsedContainer.id = 'collapsedRewards';
                collapsedContainer.className = isCollapsed ? 'collapsed' : '';
                
                rewards.slice(maxVisibleRewards).forEach((reward, index) => {
                    collapsedContainer.innerHTML += createRewardItem(reward, index + maxVisibleRewards);
                });
                container.appendChild(collapsedContainer);
            }

            updateCollapseButton();
        }

        function createRewardItem(reward, index) {
            return `<div class="reward-item" onclick="drawRewardPlayer(${index})">
                      <h3>${reward.name}</h3>
                      <small>ç‚¹å‡»æŠ½å–çƒå‘˜</small>
                    </div>`;
        }

        function toggleCollapse() {
            isCollapsed = !isCollapsed;
            const container = document.getElementById('collapsedRewards');
            if (container) container.classList.toggle('collapsed');
            updateCollapseButton();
        }

        function updateCollapseButton() {
            const button = document.getElementById('collapseButton');
            button.style.display = state.claimedRewards.length > maxVisibleRewards ? 'block' : 'none';
            button.textContent = isCollapsed ? 'å±•å¼€æ›´å¤šå¥–åŠ±' : 'æ”¶èµ·å¥–åŠ±';
        }

// è¾…åŠ©åŠŸèƒ½
        function showResult(message, color) {
            document.getElementById('result').innerHTML = `
                <div class="result-card" style="border-color: ${color}">
                    <h3 style="color: ${color}">${message}</h3>
                    <small>å½“å‰æ¦‚ç‡ï¼š${probabilityConfig.getCurrentProb(state.drawCount)}%</small><br>
                    <small>å½“å‰å€ç‡ï¼š${rateCalculator.getRate(state.drawCount)}%</small>
                </div>`;
        }

        // è¾…åŠ©å‡½æ•°
        function getRandomPlayer() {
            const leagues = Object.keys(playersDB);
            const league = leagues[Math.floor(Math.random() * leagues.length)];
            const players = playersDB[league];
            return `${league} Â· ${players[Math.floor(Math.random() * players.length)]}`;
        }

        function showRewardNotification(reward) {
            const notification = document.createElement('div');
            notification.className = 'result-card';
            notification.innerHTML = `
                <h3 style="color: #00FF88">ğŸ è·å¾—ç´¯è®¡å¥–åŠ±ï¼š${reward.name}</h3>
            `;

document.getElementById('result').prepend(notification);
        }

        // åˆå§‹åŒ–
        updateUI();
    </script>
</body>
</html>